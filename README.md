# OknaRed - симулятор Windows 8.1 в браузере
## Введение
OknaRed (ex. Okna8) - проект, начатый мною в 2022 году как пародия на начальный экран Windows 8.1, переросшая в симулятор Windows 8.1. \
В OknaRed есть рабочий стол, начальный экран, панель чудо-кнопок (charmsbar), оконные и Metro-приложения, OOBE и своя внутренняя файловая система, работающая на indexeddb. \
Все файлы OknaRed хранятся в indexeddb, поэтому любой файл можно отредактировать из самой системы. \
В качестве библиотеки для работы с indexeddb используется indexeddb-fs, модифицированная мной (поддержка кириллицы, пробелов, запись файлов в формате base64). \
OknaRed можно собрать из исходных кодов. В исходных кодах OknaRed есть шаблон для содержимого раздела (FsSources), в котором хранятся все файлы, не являющиеся приложениями или библиотеками. Приложения и библиотеки собираются отдельно из AppsSources.
## Компиляция
Для компиляции любых файлов в OknaRed требуется Node.JS на компьютере.
### Собрать всё
Сборка OknaRed из исходного кода включает в себя:
1. Копирование FsSources (исходник файловой системы) в temp/FsSources.
2. Сборка каждого приложения и библиотеки в temp/FsSources.
3. Упаковка образа в файл temp/FsImage.orim и temp/FsImage.orim.js (для установки через OknaRedSetup.html).
   
Параметры сборки хранятся в OknaRedCompileParams.json. Там находится в том числе и список приложений и библиотек, которые нужно скомпилировать.
Для того, чтобы начать сборку, введите команду:
```batch
node !OknaRedCompile.js
```
Компилятор выполнит все операции и сохранит готовый образ в temp/FsImage.orim и temp/FsImage.orim.js.
### Файл значка
Чтобы собрать значок (иконку), используйте следующие команды:
```batch
node IconCompiler.js "путь/до/папки" "путь/до/собранной/иконки.oric"
```
Например, чтобы скомпилировать иконку компьютера в ресурсы imageres, используйте следующий код:
```batch
node IconCompiler.js "Icons/mycomputer" "AppsSources/imageres/res/Icon/109.oric"
```
### Оконное приложение/библиотека
Чтобы собрать оконное приложение (ORE), библиотеку (EL) или библиотеку локализации (ML), используйте следующий код:
```batch
node AppCompiler.js "путь/до/папки" "путь/до/собранного/файла" 
```
Например, чтобы собрать regedit.ore, используйте следующий код:
```batch
node AppCompiler.js "AppsResources/regedit" "regedit.ore" 
```
Сборка библиотек выглядит также, например, imageres:
```batch
node AppCompiler.js "AppsResources/imageres" "imageres.el" 
```
### Образ файловой системы
Если вы хотите сделать orim-образ какой-либо папки, то используйте команду:
```batch
node CreateImage.js "temp/FsSources" "fsimage.orim" 
```
